# 任务：检查并修正 ref_school 关联表数据一致性

## 背景

前一个任务已修正 `ref_school` 表数据：
- **代码修正**：3所学校（嘉一实验、上大附属嘉定、宋庆龄）
- **新增学校**：4所（友谊中学、师大附属嘉定高中、安亭高级中学、张堰中学）
- **标记不活跃**：1所（五爱高级中学）

现在需要检查并修正与 `ref_school` 关联的表，确保数据一致性。

## 关联表

| 表名 | 关联字段 | 说明 |
|------|----------|------|
| `ref_admission_plan_summary` | school_id, school_name | 招生计划 |
| `ref_admission_score_unified` | school_id, school_name | 统一招生分数线 |
| `ref_admission_score_quota_district` | school_id, school_name | 名额到区分数线 |
| `ref_admission_score_quota_school` | school_id, school_name | 名额到校分数线 |
| `ref_quota_allocation_district` | school_id, school_code | 名额到区计划 |
| `ref_quota_allocation_school` | high_school_id, high_school_code | 名额到校计划 |

## 成功标准

- [ ] 检查所有关联表一致性
- [ ] 修正不一致数据
- [ ] 验证通过 verify.sh

## 实现计划

- [ ] **T1**: 查询不一致数据
- [ ] **T2**: 执行修正 SQL
- [ ] **T3**: 验证修正结果

## 约束

**必须：**
- 以 ref_school 为准
- 执行 verify.sh 验证

**禁止：**
- 修改 ref_school 数据

## 完成信号

任务完成后输出：

```
MISSION_COMPLETE
```

---

## 第 1 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 2 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 3 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 4 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 5 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 6 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 7 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 8 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 9 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 10 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 11 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 12 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 13 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 14 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 15 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 16 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 17 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 18 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 19 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。


---

## 第 20 轮失败

```
════════════════════════════════════════════════════════
  Stop Hook: 验证
════════════════════════════════════════════════════════

[1/2] 检查完成信号...
❌ AI 未输出 MISSION_COMPLETE 信号
   AI 需要在完成任务后输出 MISSION_COMPLETE
```

**要求**: 修复上述错误后重新运行。

