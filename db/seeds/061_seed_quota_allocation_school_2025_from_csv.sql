-- =============================================================================
-- 2025年名额分配到校招生计划 - 从CSV导入
-- 自动生成时间: 2026-02-18 14:54:44
-- 数据来源: original_data/processed/2025/quota_school/
-- 总记录数: 2282
-- 覆盖区县: 金山区, 青浦区, 松江区, 嘉定区, 普陀区, 静安区, 虹口区, 闵行区, 杨浦区, 奉贤区, 宝山区, 长宁区, 崇明区, 黄浦区, 浦东新区
-- =============================================================================

-- 清理已有2025年数据（取消注释以启用）
-- DELETE FROM ref_quota_allocation_school WHERE data_year = 2025 AND district_id IN (SELECT id FROM ref_district WHERE name IN ('金山区, 青浦区, 松江区, 嘉定区, 普陀区, 静安区, 虹口区, 闵行区, 杨浦区, 奉贤区, 宝山区, 长宁区, 崇明区, 黄浦区, 浦东新区'));

INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市罗星中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市罗星中学', 19, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市罗星中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市罗星中学', 20, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市松隐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市松隐中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市松隐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市松隐中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市亭新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市亭新中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市亭新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市亭新中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市漕泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市漕泾中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市漕泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市漕泾中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市山阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市山阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市山阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市山阳中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市山阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市山阳中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市张堰第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市张堰第二中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市张堰第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市张堰第二中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市廊下中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市廊下中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市廊下中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市廊下中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市蒙山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市蒙山中学', 24, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市蒙山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市蒙山中学', 24, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市金山区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市金山区教育学院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市金山区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市金山区教育学院附属中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市金山区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市金山区教育学院附属中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市金山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市金山初级中学', 16, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市金山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市金山初级中学', 17, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市西林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市西林中学', 20, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市西林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市西林中学', 21, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市朱行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市朱行中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市朱行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市朱行中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市同凯中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市同凯中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市同凯中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市同凯中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学附属枫泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '华东师范大学附属枫泾中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学附属枫泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '华东师范大学附属枫泾中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市金卫中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市金卫中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市金卫中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市金卫中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市金山实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市金山实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市金山实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市金山实验中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市金山实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市金山实验中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市民办永昌中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市民办永昌中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市民办永昌中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海市民办永昌中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属金山前京中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海师范大学附属金山前京中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属金山前京中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海师范大学附属金山前京中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属金山前京中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JS') LIMIT 1), '上海师范大学附属金山前京中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区白鹤中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区白鹤中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区珠溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区珠溪中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区凤溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区凤溪中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区华新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区华新中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区实验中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区东方中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区东方中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区尚美中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区尚美中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区徐泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区徐泾中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区凤溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区凤溪中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区重固中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区重固中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区豫才中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区豫才中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区华新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区华新中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区白鹤中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区白鹤中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区珠溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区珠溪中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区沈巷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区沈巷中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区颜安中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区颜安中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区金泽中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区金泽中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海政法学院附属青浦崧淀中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海政法学院附属青浦崧淀中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市教育学会青浦清河湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市教育学会青浦清河湾中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区教育学院附属中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182002' AND is_active = true LIMIT 1), '182002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区第一中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区实验中学', 35, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区东方中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区东方中学', 25, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区尚美中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区尚美中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区徐泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区徐泾中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区凤溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区凤溪中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区重固中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区重固中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区豫才中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区豫才中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区华新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区华新中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区白鹤中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区白鹤中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区珠溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区珠溪中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区沈巷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区沈巷中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区颜安中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区颜安中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区金泽中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区金泽中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海政法学院附属青浦崧淀中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海政法学院附属青浦崧淀中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市教育学会青浦清河湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市教育学会青浦清河湾中学', 16, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区教育学院附属中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '182001' AND is_active = true LIMIT 1), '182001', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区第一中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '182001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区实验中学', 35, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区东方中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区东方中学', 25, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区尚美中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区尚美中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区徐泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区徐泾中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区凤溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区凤溪中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区重固中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区重固中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区豫才中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区豫才中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区华新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区华新中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区白鹤中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区白鹤中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区珠溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区珠溪中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区沈巷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区沈巷中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区颜安中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区颜安中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区金泽中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区金泽中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海政法学院附属青浦崧淀中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海政法学院附属青浦崧淀中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市教育学会青浦清河湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市教育学会青浦清河湾中学', 16, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区教育学院附属中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'QP'), (SELECT id FROM ref_school WHERE code = '183002' AND is_active = true LIMIT 1), '183002', (SELECT id FROM ref_middle_school WHERE name = '上海市青浦区第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'QP') LIMIT 1), '上海市青浦区第一中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'QP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '183002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172001' AND is_active = true LIMIT 1), '172001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第七中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第七中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '173001' AND is_active = true LIMIT 1), '173001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第七中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第七中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '173001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '174003' AND is_active = true LIMIT 1), '174003', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第七中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第七中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '174003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172002' AND is_active = true LIMIT 1), '172002', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第七中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第七中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172004' AND is_active = true LIMIT 1), '172004', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第七中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第七中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第七中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第七中学', 51, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172001' AND is_active = true LIMIT 1), '172001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第五中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '173001' AND is_active = true LIMIT 1), '173001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第五中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '173001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '174003' AND is_active = true LIMIT 1), '174003', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第五中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '174003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172002' AND is_active = true LIMIT 1), '172002', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第五中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172004' AND is_active = true LIMIT 1), '172004', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第五中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第五中学', 19, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172001' AND is_active = true LIMIT 1), '172001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江四中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江四中初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '173001' AND is_active = true LIMIT 1), '173001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江四中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江四中初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '173001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '174003' AND is_active = true LIMIT 1), '174003', (SELECT id FROM ref_middle_school WHERE name = '上海市松江四中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江四中初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '174003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172004' AND is_active = true LIMIT 1), '172004', (SELECT id FROM ref_middle_school WHERE name = '上海市松江四中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江四中初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市松江四中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江四中初级中学', 18, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172001' AND is_active = true LIMIT 1), '172001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭中学', 13, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '173001' AND is_active = true LIMIT 1), '173001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '173001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '174003' AND is_active = true LIMIT 1), '174003', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '174003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172002' AND is_active = true LIMIT 1), '172002', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172004' AND is_active = true LIMIT 1), '172004', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭中学', 47, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172001' AND is_active = true LIMIT 1), '172001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第六中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第六中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '173001' AND is_active = true LIMIT 1), '173001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第六中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第六中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '173001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172002' AND is_active = true LIMIT 1), '172002', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第六中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第六中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172004' AND is_active = true LIMIT 1), '172004', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第六中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第六中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区第六中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区第六中学', 26, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172001' AND is_active = true LIMIT 1), '172001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭第二中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '173001' AND is_active = true LIMIT 1), '173001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭第二中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '173001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '174003' AND is_active = true LIMIT 1), '174003', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭第二中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '174003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172002' AND is_active = true LIMIT 1), '172002', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172004' AND is_active = true LIMIT 1), '172004', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区九亭第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区九亭第二中学', 17, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172001' AND is_active = true LIMIT 1), '172001', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学附属外国语学校松江云间中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海外国语大学附属外国语学校松江云间中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '174003' AND is_active = true LIMIT 1), '174003', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学附属外国语学校松江云间中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海外国语大学附属外国语学校松江云间中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '174003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172002' AND is_active = true LIMIT 1), '172002', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学附属外国语学校松江云间中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海外国语大学附属外国语学校松江云间中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172004' AND is_active = true LIMIT 1), '172004', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学附属外国语学校松江云间中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海外国语大学附属外国语学校松江云间中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学附属外国语学校松江云间中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海外国语大学附属外国语学校松江云间中学', 22, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172001' AND is_active = true LIMIT 1), '172001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区新桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区新桥中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '173001' AND is_active = true LIMIT 1), '173001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区新桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区新桥中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '173001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '174003' AND is_active = true LIMIT 1), '174003', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区新桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区新桥中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '174003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172002' AND is_active = true LIMIT 1), '172002', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区新桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区新桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172004' AND is_active = true LIMIT 1), '172004', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区新桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区新桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区新桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区新桥中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '173001' AND is_active = true LIMIT 1), '173001', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区民办茸一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区民办茸一中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '173001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '174003' AND is_active = true LIMIT 1), '174003', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区民办茸一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区民办茸一中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '174003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172002' AND is_active = true LIMIT 1), '172002', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区民办茸一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区民办茸一中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '172004' AND is_active = true LIMIT 1), '172004', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区民办茸一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区民办茸一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '172004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'SJ'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市松江区民办茸一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'SJ') LIMIT 1), '上海市松江区民办茸一中学', 23, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'SJ') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区启良中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区启良中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区启良中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区启良中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区启良中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区启良中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区方泰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区方泰中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区方泰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区方泰中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区方泰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区方泰中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区方泰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区方泰中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨二中附属江桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市曹杨二中附属江桥实验中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨二中附属江桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市曹杨二中附属江桥实验中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨二中附属江桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市曹杨二中附属江桥实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区迎园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区迎园中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区迎园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区迎园中学', 13, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区迎园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区迎园中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区南苑中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区南苑中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区南苑中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区南苑中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区南苑中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区南苑中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区黄渡中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区黄渡中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区黄渡中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区黄渡中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区黄渡中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区黄渡中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区黄渡中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区黄渡中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区徐行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区徐行中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区徐行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区徐行中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区徐行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区徐行中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区马陆育才联合中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区马陆育才联合中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区马陆育才联合中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区马陆育才联合中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区马陆育才联合中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区马陆育才联合中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区马陆育才联合中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区马陆育才联合中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市民办嘉一联合中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办嘉一联合中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办嘉一联合中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办嘉一联合中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办嘉一联合中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办嘉一联合中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市民办嘉一联合中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办嘉一联合中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区丰庄中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区丰庄中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区丰庄中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区丰庄中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区丰庄中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区丰庄中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区丰庄中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区丰庄中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区外冈中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区外冈中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区外冈中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区外冈中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区外冈中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区外冈中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海民办华曜嘉定初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海民办华曜嘉定初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海民办华曜嘉定初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海民办华曜嘉定初级中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海民办华曜嘉定初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海民办华曜嘉定初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区震川中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区震川中学', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区震川中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区震川中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区震川中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区震川中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海大学附属嘉定留云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海大学附属嘉定留云中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海大学附属嘉定留云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海大学附属嘉定留云中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海大学附属嘉定留云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海大学附属嘉定留云中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '交大附中附属嘉定德富中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '交大附中附属嘉定德富中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '交大附中附属嘉定德富中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '交大附中附属嘉定德富中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '交大附中附属嘉定德富中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '交大附中附属嘉定德富中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '同济大学附属实验中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '同济大学附属实验中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '同济大学附属实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区华江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区华江中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区华江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区华江中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区华江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区华江中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区新城实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区新城实验中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区新城实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区新城实验中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区新城实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区新城实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区南翔中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区南翔中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区南翔中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区南翔中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区南翔中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区南翔中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区疁城实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区疁城实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区疁城实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区疁城实验学校', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区疁城实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区疁城实验学校', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区疁城实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区疁城实验学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区戬浜学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区戬浜学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区戬浜学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区戬浜学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区戬浜学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区戬浜学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区戬浜学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区戬浜学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区朱桥学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区朱桥学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区朱桥学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区朱桥学校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区朱桥学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区朱桥学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区朱桥学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区朱桥学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区苏民学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区苏民学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区苏民学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区苏民学校', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区苏民学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区苏民学校', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区苏民学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区苏民学校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办远东学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办远东学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办远东学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办远东学校', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市民办远东学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办远东学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市民办桃李园实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办桃李园实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办桃李园实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办桃李园实验学校', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办桃李园实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办桃李园实验学校', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市民办桃李园实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市民办桃李园实验学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区华亭学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区华亭学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区华亭学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区华亭学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区华亭学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区华亭学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区娄塘学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区娄塘学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区娄塘学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区娄塘学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区娄塘学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区娄塘学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学嘉定外国语学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海外国语大学嘉定外国语学校', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学嘉定外国语学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海外国语大学嘉定外国语学校', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学嘉定外国语学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海外国语大学嘉定外国语学校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区练川实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区练川实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区练川实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区练川实验学校', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区练川实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区练川实验学校', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区练川实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区练川实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海华旭双语学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海华旭双语学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海华旭双语学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海华旭双语学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海华旭双语学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海华旭双语学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海华旭双语学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海华旭双语学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '中科院上海实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '中科院上海实验学校', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '中科院上海实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '中科院上海实验学校', 13, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '中科院上海实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '中科院上海实验学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海嘉定区世界外国语学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海嘉定区世界外国语学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海嘉定区世界外国语学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海嘉定区世界外国语学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海嘉定区世界外国语学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海嘉定区世界外国语学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区金鹤学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区金鹤学校', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区金鹤学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区金鹤学校', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区金鹤学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区金鹤学校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属第五嘉定实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海师范大学附属第五嘉定实验学校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属第五嘉定实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海师范大学附属第五嘉定实验学校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属第五嘉定实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海师范大学附属第五嘉定实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属嘉定实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '同济大学附属嘉定实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属嘉定实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '同济大学附属嘉定实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属嘉定实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '同济大学附属嘉定实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '交大附中附属嘉定洪德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '交大附中附属嘉定洪德中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '交大附中附属嘉定洪德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '交大附中附属嘉定洪德中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '交大附中附属嘉定洪德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '交大附中附属嘉定洪德中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '交大附中附属嘉定洪德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '交大附中附属嘉定洪德中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区嘉二实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区嘉二实验学校', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区嘉二实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区嘉二实验学校', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海市嘉定区嘉二实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海市嘉定区嘉二实验学校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142001' AND is_active = true LIMIT 1), '142001', (SELECT id FROM ref_middle_school WHERE name = '上海嘉定区民办华盛怀少学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海嘉定区民办华盛怀少学校', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142002' AND is_active = true LIMIT 1), '142002', (SELECT id FROM ref_middle_school WHERE name = '上海嘉定区民办华盛怀少学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海嘉定区民办华盛怀少学校', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JD'), (SELECT id FROM ref_school WHERE code = '142004' AND is_active = true LIMIT 1), '142004', (SELECT id FROM ref_middle_school WHERE name = '上海嘉定区民办华盛怀少学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JD') LIMIT 1), '上海嘉定区民办华盛怀少学校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '142004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市洵阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市洵阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市洵阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市洵阳中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市洵阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市洵阳中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市洵阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市洵阳中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市北海中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市北海中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市北海中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市北海中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市北海中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市北海中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市北海中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市北海中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市延河中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市延河中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市延河中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市延河中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市延河中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市延河中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市延河中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市延河中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨第二中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨第二中学附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨第二中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨第二中学附属实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨第二中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨第二中学附属实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨第二中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨第二中学附属实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第四附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '华东师范大学第四附属中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第四附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '华东师范大学第四附属中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第四附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '华东师范大学第四附属中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市怒江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市怒江中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市怒江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市怒江中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市怒江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市怒江中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市怒江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市怒江中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市真北中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市真北中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市真北中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市真北中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市真北中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市真北中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市真北中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市真北中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市普陀区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市普陀区教育学院附属中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市普陀区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市普陀区教育学院附属中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市普陀区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市普陀区教育学院附属中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市普陀区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市普陀区教育学院附属中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市梅陇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市梅陇中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市梅陇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市梅陇中学', 18, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市梅陇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市梅陇中学', 18, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海兰田中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海兰田中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海兰田中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海兰田中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海兰田中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海兰田中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海兰田中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海兰田中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海兰田中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海兰田中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '许上海市普陀区梅陇实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '许上海市普陀区梅陇实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '许上海市普陀区梅陇实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '许上海市普陀区梅陇实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '许上海市普陀区梅陇实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '许上海市普陀区梅陇实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '许上海市普陀区梅陇实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '许上海市普陀区梅陇实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '同济大学第二附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '同济大学第二附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '同济大学第二附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '同济大学第二附属中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '同济大学第二附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '同济大学第二附属中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '同济大学第二附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '同济大学第二附属中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市甘泉外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市甘泉外国语中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市甘泉外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市甘泉外国语中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市甘泉外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市甘泉外国语中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市甘泉外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市甘泉外国语中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市新杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市新杨中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市新杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市新杨中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市新杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市新杨中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市新杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市新杨中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市长征中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市长征中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市长征中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市长征中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市长征中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市长征中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市长征中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市长征中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市长征中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市长征中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市桃浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市桃浦中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市桃浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市桃浦中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市桃浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市桃浦中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市晋元高级中学附属学校南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市晋元高级中学附属学校南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市晋元高级中学附属学校南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市晋元高级中学附属学校南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市晋元高级中学附属学校南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市晋元高级中学附属学校南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海音乐学院附属安师实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海音乐学院附属安师实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海音乐学院附属安师实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海音乐学院附属安师实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海音乐学院附属安师实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海音乐学院附属安师实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海音乐学院附属安师实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海音乐学院附属安师实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海音乐学院附属安师实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海音乐学院附属安师实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海华东师范大学附属进华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海华东师范大学附属进华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海华东师范大学附属进华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海华东师范大学附属进华中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海华东师范大学附属进华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海华东师范大学附属进华中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海华东师范大学附属进华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海华东师范大学附属进华中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市宜川中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市宜川中学附属学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市宜川中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市宜川中学附属学校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市宜川中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市宜川中学附属学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市宜川中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市宜川中学附属学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨中学附属学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨中学附属学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨中学附属学校', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市晋元高级中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市晋元高级中学附属学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市晋元高级中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市晋元高级中学附属学校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市晋元高级中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市晋元高级中学附属学校', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市晋元高级中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市晋元高级中学附属学校', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073003' AND is_active = true LIMIT 1), '073003', (SELECT id FROM ref_middle_school WHERE name = '上海市晋元高级中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市晋元高级中学附属学校', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '073082' AND is_active = true LIMIT 1), '073082', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨第二中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨第二中学附属学校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '073082' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072002' AND is_active = true LIMIT 1), '072002', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨第二中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨第二中学附属学校', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PT'), (SELECT id FROM ref_school WHERE code = '072001' AND is_active = true LIMIT 1), '072001', (SELECT id FROM ref_middle_school WHERE name = '上海市曹杨第二中学附属学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PT') LIMIT 1), '上海市曹杨第二中学附属学校', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PT') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '072001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市市西初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市西初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市市西初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市西初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市市西初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市西初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市市西初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市西初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市市西初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市西初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市市西初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市西初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市市西初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市西初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市育才初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市育才初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市育才初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市育才初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市育才初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市育才初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市育才初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市育才初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市育才初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市育才初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市育才初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市育才初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市育才初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市育才初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市时代中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市时代中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市时代中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市时代中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市时代中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市时代中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市时代中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市时代中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市时代中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市时代中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市时代中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市时代中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市时代中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市时代中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市时代中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市时代中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市五四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市五四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市五四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市五四中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市五四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市五四中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市五四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市五四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市五四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市五四中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市五四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市五四中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市五四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市五四中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '民办上海上外静安外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '民办上海上外静安外国语中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '民办上海上外静安外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '民办上海上外静安外国语中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '民办上海上外静安外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '民办上海上外静安外国语中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '民办上海上外静安外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '民办上海上外静安外国语中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '民办上海上外静安外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '民办上海上外静安外国语中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '民办上海上外静安外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '民办上海上外静安外国语中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '民办上海上外静安外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '民办上海上外静安外国语中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区市北初级中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区市北初级中学北校', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区市北初级中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区市北初级中学北校', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区市北初级中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区市北初级中学北校', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区市北初级中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区市北初级中学北校', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区市北初级中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区市北初级中学北校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区市北初级中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区市北初级中学北校', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区市北初级中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区市北初级中学北校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市新中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市新中初级中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市新中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市新中初级中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市新中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市新中初级中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市新中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市新中初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市新中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市新中初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市新中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市新中初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市新中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市新中初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市静安区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市静安区实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市朝阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市朝阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市朝阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市朝阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市朝阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市朝阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市朝阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市朝阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市朝阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市朝阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市朝阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市朝阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市朝阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市朝阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市朝阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市朝阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市市北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市北初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市市北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市北初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市市北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市北初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市市北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市北初级中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市市北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市北初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市市北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市北初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市市北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市市北初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市风华初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市风华初级中学', 20, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市风华初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市风华初级中学', 19, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市风华初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市风华初级中学', 19, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市风华初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市风华初级中学', 22, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市风华初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市风华初级中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市风华初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市风华初级中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市风华初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市风华初级中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学苏河湾实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海外国语大学苏河湾实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学苏河湾实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海外国语大学苏河湾实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学苏河湾实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海外国语大学苏河湾实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学苏河湾实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海外国语大学苏河湾实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学苏河湾实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海外国语大学苏河湾实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学苏河湾实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海外国语大学苏河湾实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学苏河湾实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海外国语大学苏河湾实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市青云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市青云中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市青云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市青云中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市青云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市青云中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市青云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市青云中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市青云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市青云中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市青云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市青云中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市青云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市青云中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市青云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市青云中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市岭南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市岭南中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市岭南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市岭南中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市岭南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市岭南中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市岭南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市岭南中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市岭南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市岭南中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市岭南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市岭南中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市岭南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市岭南中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市保德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市保德中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市保德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市保德中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市保德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市保德中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市保德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市保德中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市保德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市保德中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市保德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市保德中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市保德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市保德中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第三中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第三中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第三中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第三中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第三中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第四中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第四中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第四中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市彭浦第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市彭浦第四中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市回民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市回民中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市回民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市回民中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市回民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市回民中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市回民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市回民中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市回民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市回民中学', 21, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市回民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市回民中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市回民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市回民中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市民立中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民立中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市民立中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民立中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市民立中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民立中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市民立中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民立中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市民立中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民立中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市民立中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民立中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市民立中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民立中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市第一中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市第一中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市第一中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市久隆模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市久隆模范中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市久隆模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市久隆模范中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市久隆模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市久隆模范中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市久隆模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市久隆模范中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市久隆模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市久隆模范中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市久隆模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市久隆模范中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市久隆模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市久隆模范中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市闸北第八中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市闸北第八中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市闸北第八中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市闸北第八中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市闸北第八中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市闸北第八中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市闸北第八中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市闸北第八中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市闸北第八中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市闸北第八中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市闸北第八中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市闸北第八中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市闸北第八中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市闸北第八中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市华东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市华东模范中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市华东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市华东模范中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市华东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市华东模范中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市华东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市华东模范中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市华东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市华东模范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市华东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市华东模范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市华东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市华东模范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市华东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市华东模范中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属七一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '同济大学附属七一中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属七一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '同济大学附属七一中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属七一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '同济大学附属七一中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属七一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '同济大学附属七一中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属七一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '同济大学附属七一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属七一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '同济大学附属七一中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属七一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '同济大学附属七一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '同济大学附属七一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '同济大学附属七一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市向东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市向东中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市向东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市向东中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市向东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市向东中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市向东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市向东中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市向东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市向东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市向东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市向东中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市向东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市向东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市向东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市向东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海田家炳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海田家炳中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海田家炳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海田家炳中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海田家炳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海田家炳中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海田家炳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海田家炳中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海田家炳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海田家炳中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海田家炳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海田家炳中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海田家炳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海田家炳中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办扬波中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办扬波中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办扬波中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办扬波中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市民办扬波中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办扬波中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市民办扬波中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办扬波中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市民办扬波中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办扬波中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办扬波中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办扬波中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市民办扬波中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办扬波中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市民办扬波中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办扬波中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办新和中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办新和中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办新和中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办新和中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办新和中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办新和中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办新和中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办新和中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062001' AND is_active = true LIMIT 1), '062001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办风范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办风范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062002' AND is_active = true LIMIT 1), '062002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办风范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办风范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062003' AND is_active = true LIMIT 1), '062003', (SELECT id FROM ref_middle_school WHERE name = '上海市民办风范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办风范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '062011' AND is_active = true LIMIT 1), '062011', (SELECT id FROM ref_middle_school WHERE name = '上海市民办风范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办风范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '062011' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '063004' AND is_active = true LIMIT 1), '063004', (SELECT id FROM ref_middle_school WHERE name = '上海市民办风范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办风范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '063004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '064001' AND is_active = true LIMIT 1), '064001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办风范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办风范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '064001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市民办风范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办风范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'JA'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市民办风范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'JA') LIMIT 1), '上海市民办风范中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'JA') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '虹口实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '虹口实验中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '虹口实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '虹口实验中学', 13, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '虹口实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '虹口实验中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '曲阳二中中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '曲阳二中中学', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '曲阳二中中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '曲阳二中中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '曲阳二中中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '曲阳二中中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '钟山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '钟山初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '钟山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '钟山初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '钟山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '钟山初级中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '长青学校中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '长青学校中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '长青学校中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '长青学校中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '长青学校中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '长青学校中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '公办华初中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '公办华初中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '公办华初中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '公办华初中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '公办华初中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '公办华初中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '公办华初中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '公办华初中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '丰镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '丰镇中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '丰镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '丰镇中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '丰镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '丰镇中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '北郊学校中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '北郊学校中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '北郊学校中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '北郊学校中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '北郊学校中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '北郊学校中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '江湾初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '江湾初级中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '江湾初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '江湾初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '江湾初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '江湾初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '江湾初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '江湾初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '复兴实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '复兴实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '复兴实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '复兴实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '复兴实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '复兴实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '上音实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '上音实验中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '上音实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '上音实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '上音实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '上音实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上音实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '上音实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '实验中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '继光初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '继光初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '继光初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '继光初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '继光初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '继光初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '海南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '海南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '海南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '海南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '海南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '海南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '海南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '海南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '鲁迅初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '鲁迅初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '鲁迅初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '鲁迅初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '鲁迅初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '鲁迅初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '五十二中中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '五十二中中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '五十二中中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '五十二中中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '五十二中中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '五十二中中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '上师虹口中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '上师虹口中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '上师虹口中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '上师虹口中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '上师虹口中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '上师虹口中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上师虹口中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '上师虹口中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '同济澄衷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '同济澄衷中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '同济澄衷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '同济澄衷中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '同济澄衷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '同济澄衷中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '同济澄衷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '同济澄衷中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '世外欧阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '世外欧阳中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '世外欧阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '世外欧阳中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '世外欧阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '世外欧阳中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '民办新华初中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新华初中学', 17, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '民办新华初中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新华初中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '民办新华初中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新华初中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '民办新华初中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新华初中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '民办新复兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新复兴中学', 17, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '民办新复兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新复兴中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '民办新复兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新复兴中学', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '民办新复兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新复兴中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '民办新北郊中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新北郊中学', 17, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '民办新北郊中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新北郊中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '民办新北郊中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新北郊中学', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '民办新北郊中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办新北郊中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '民办迅行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办迅行中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '民办迅行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办迅行中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '民办迅行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办迅行中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092001' AND is_active = true LIMIT 1), '092001', (SELECT id FROM ref_middle_school WHERE name = '民办克勒中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办克勒中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '092002' AND is_active = true LIMIT 1), '092002', (SELECT id FROM ref_middle_school WHERE name = '民办克勒中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办克勒中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '092002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '093001' AND is_active = true LIMIT 1), '093001', (SELECT id FROM ref_middle_school WHERE name = '民办克勒中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办克勒中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '093001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '民办克勒中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办克勒中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HK'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '民办克勒中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HK') LIMIT 1), '民办克勒中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HK') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市航华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市航华中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市航华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市航华中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市航华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市航华中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市航华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市航华中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市航华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市航华中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市航华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市航华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市航华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市航华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区上虹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区上虹中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区上虹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区上虹中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区上虹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区上虹中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区上虹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区上虹中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区上虹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区上虹中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区上虹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区上虹中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区上虹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区上虹中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市龙柏中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市龙柏中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市龙柏中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市龙柏中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市龙柏中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市龙柏中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市龙柏中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市龙柏中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市龙柏中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市龙柏中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市龙柏中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市龙柏中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第二中学', 16, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第二中学', 19, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第二中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第二中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第二中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第二中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第二中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市罗阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市罗阳中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市罗阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市罗阳中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市罗阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市罗阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市罗阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市罗阳中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市罗阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市罗阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市罗阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市罗阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市罗阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市罗阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区莘松中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区莘松中学', 28, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区莘松中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区莘松中学', 28, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区莘松中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区莘松中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区莘松中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区莘松中学', 20, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区莘松中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区莘松中学', 17, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区莘松中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区莘松中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区莘松中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区莘松中学', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区莘松中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区莘松中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属闵行金都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属闵行金都实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属闵行金都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属闵行金都实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属闵行金都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属闵行金都实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属闵行金都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属闵行金都实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属闵行金都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属闵行金都实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属闵行金都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属闵行金都实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属闵行金都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属闵行金都实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区北桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区北桥中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区北桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区北桥中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区北桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区北桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区北桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区北桥中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区北桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区北桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区北桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区北桥中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区北桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区北桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第一中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第一中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第二中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第二中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第三中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第三中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第三中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第三中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦江第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦江第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第四中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第四中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第四中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区颛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区颛桥中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区颛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区颛桥中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区颛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区颛桥中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区颛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区颛桥中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区颛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区颛桥中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区颛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区颛桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区颛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区颛桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区鹤北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区鹤北初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区鹤北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区鹤北初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区鹤北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区鹤北初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区鹤北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区鹤北初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区鹤北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区鹤北初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区鹤北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区鹤北初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区鹤北初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区鹤北初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区龙茗中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区龙茗中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区龙茗中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区龙茗中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区龙茗中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区龙茗中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区龙茗中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区龙茗中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区龙茗中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区龙茗中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区龙茗中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区龙茗中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝实验中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝实验中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市师资培训中心附属闵行实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市师资培训中心附属闵行实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市师资培训中心附属闵行实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市师资培训中心附属闵行实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市师资培训中心附属闵行实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市师资培训中心附属闵行实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市师资培训中心附属闵行实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市师资培训中心附属闵行实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市师资培训中心附属闵行实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市师资培训中心附属闵行实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市师资培训中心附属闵行实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市师资培训中心附属闵行实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市吴泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市吴泾中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市吴泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市吴泾中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市吴泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市吴泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市吴泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市吴泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市吴泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市吴泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市吴泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市吴泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市吴泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市吴泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第三中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第三中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第三中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第三中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第三中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区七宝第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区七宝第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '华东师范大学第二附属中学附属初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '华东师范大学第二附属中学附属初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '华东师范大学第二附属中学附属初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '华东师范大学第二附属中学附属初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '华东师范大学第二附属中学附属初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '华东师范大学第二附属中学附属初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '华东师范大学第二附属中学附属初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '华东师范大学第二附属中学附属初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦航实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦航实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦航实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦航实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦航实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦航实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦航实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦航实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦航实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦航实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦航实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦航实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦航实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦航实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区浦航实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区浦航实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区马桥复旦万科实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区马桥复旦万科实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区马桥复旦万科实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区马桥复旦万科实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区马桥复旦万科实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区马桥复旦万科实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区马桥复旦万科实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区马桥复旦万科实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区马桥复旦万科实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区马桥复旦万科实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区马桥复旦万科实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区马桥复旦万科实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海中医药大学附属闵行晶城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海中医药大学附属闵行晶城中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海中医药大学附属闵行晶城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海中医药大学附属闵行晶城中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海中医药大学附属闵行晶城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海中医药大学附属闵行晶城中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海中医药大学附属闵行晶城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海中医药大学附属闵行晶城中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海中医药大学附属闵行晶城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海中医药大学附属闵行晶城中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海中医药大学附属闵行晶城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海中医药大学附属闵行晶城中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海中医药大学附属闵行晶城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海中医药大学附属闵行晶城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海师范大学附属闵行第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海师范大学附属闵行第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海师范大学附属闵行第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海师范大学附属闵行第三中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海师范大学附属闵行第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海师范大学附属闵行第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海师范大学附属闵行第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区田园外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区田园外国语中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区田园外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区田园外国语中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区田园外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区田园外国语中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区田园外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区田园外国语中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区田园外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区田园外国语中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区田园外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区田园外国语中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行区田园外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行区田园外国语中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行中学附属实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行中学附属实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行中学附属实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行中学附属实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行中学附属实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行中学附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行中学附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行中学附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海尚师初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海尚师初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海尚师初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海尚师初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海尚师初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海尚师初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海尚师初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海尚师初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海尚师初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海尚师初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海尚师初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海尚师初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海尚师初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海尚师初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海尚师初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海尚师初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第三中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第三中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第三中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市闵行第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市闵行第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海交通大学附属第二中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海交通大学附属第二中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海交通大学附属第二中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海交通大学附属第二中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海交通大学附属第二中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海交通大学附属第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海交通大学附属第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海交通大学附属第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办上宝中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办上宝中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办上宝中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办上宝中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办上宝中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办上宝中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市民办上宝中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办上宝中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市民办上宝中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办上宝中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市民办上宝中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办上宝中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办上宝中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办上宝中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市民办上宝中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办上宝中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属鑫都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属鑫都实验中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属鑫都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属鑫都实验中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属鑫都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属鑫都实验中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属鑫都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属鑫都实验中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属鑫都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属鑫都实验中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属鑫都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属鑫都实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属鑫都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属鑫都实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市七宝中学附属鑫都实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市七宝中学附属鑫都实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市文来中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市文来中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市文来中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市文来中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市文来中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市文来中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市文来中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市文来中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市文来中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市文来中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市文来中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市文来中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市文来中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市文来中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市文来中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市文来中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122001' AND is_active = true LIMIT 1), '122001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办文绮中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办文绮中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '123001' AND is_active = true LIMIT 1), '123001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办文绮中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办文绮中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '123001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122002' AND is_active = true LIMIT 1), '122002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办文绮中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办文绮中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122003' AND is_active = true LIMIT 1), '122003', (SELECT id FROM ref_middle_school WHERE name = '上海市民办文绮中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办文绮中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '122004' AND is_active = true LIMIT 1), '122004', (SELECT id FROM ref_middle_school WHERE name = '上海市民办文绮中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办文绮中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '122004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '上海市民办文绮中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办文绮中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'MH'), (SELECT id FROM ref_school WHERE code = '042002' AND is_active = true LIMIT 1), '042002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办文绮中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'MH') LIMIT 1), '上海市民办文绮中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'MH') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '许上海市铁岭中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '许上海市铁岭中学', 16, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '许上海市铁岭中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '许上海市铁岭中学', 13, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市鞍山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市鞍山初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市鞍山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市鞍山初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市鞍山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市鞍山初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市鞍山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市鞍山初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '经上海市十五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '经上海市十五中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '经上海市十五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '经上海市十五中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市杨浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市杨浦初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市杨浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市杨浦初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市杨浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市杨浦初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市杨浦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市杨浦初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '未上海市惠民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '未上海市惠民中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市辽阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市辽阳中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市辽阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市辽阳中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市辽阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市辽阳中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市辽阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市辽阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市新大桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市新大桥中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市新大桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市新大桥中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市新大桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市新大桥中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '经上海市建设初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '经上海市建设初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '经上海市建设初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '经上海市建设初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市东辽阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市东辽阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市东辽阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市东辽阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市东辽阳中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市东辽阳中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '未上海市二十五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '未上海市二十五中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '未上海市二十五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '未上海市二十五中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海理工大学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海理工大学附属初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海理工大学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海理工大学附属初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海理工大学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海理工大学附属初级中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海理工大学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海理工大学附属初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市杨浦区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市杨浦区教育学院附属中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市杨浦区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市杨浦区教育学院附属中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市杨浦区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市杨浦区教育学院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市同济初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市同济初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市同济初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市同济初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市同济初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市同济初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市同济初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市同济初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '许上海市三门中学（上海财经大学附属初级中学）' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '许上海市三门中学（上海财经大学附属初级中学）', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '许上海市三门中学（上海财经大学附属初级中学）' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '许上海市三门中学（上海财经大学附属初级中学）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市包头中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市包头中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市包头中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市包头中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市包头中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市包头中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '可上海市思源中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '可上海市思源中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '可上海市思源中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '可上海市思源中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '可上海市思源中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '可上海市思源中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市鞍山实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市鞍山实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市鞍山实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市鞍山实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市鞍山实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市鞍山实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '许上海市同济第二初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '许上海市同济第二初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '许上海市同济第二初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '许上海市同济第二初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '许上海市同济第二初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '许上海市同济第二初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市国和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市国和中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市国和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市国和中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市国和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市国和中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市国和中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市国和中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '经上海理工大学附属实验初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '经上海理工大学附属实验初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '经上海理工大学附属实验初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '经上海理工大学附属实验初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '经上海理工大学附属实验初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '经上海理工大学附属实验初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市控江初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市控江初级中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市控江初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市控江初级中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市控江初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市控江初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市控江初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市控江初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海民办杨浦凯慧初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海民办杨浦凯慧初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海民办杨浦凯慧初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海民办杨浦凯慧初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海民办杨浦凯慧初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海民办杨浦凯慧初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海民办杨浦凯慧初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海民办杨浦凯慧初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '经上海市市东实验学校（上海市市东中学）' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '经上海市市东实验学校（上海市市东中学）', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '经上海市市东实验学校（上海市市东中学）' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '经上海市市东实验学校（上海市市东中学）', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市复旦实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市复旦实验中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市复旦实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市复旦实验中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市复旦实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市复旦实验中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市复旦实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市复旦实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '未上海民办兰生中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '未上海民办兰生中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '未上海民办兰生中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '未上海民办兰生中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102032' AND is_active = true LIMIT 1), '102032', (SELECT id FROM ref_middle_school WHERE name = '上海市体育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市体育学院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '102004' AND is_active = true LIMIT 1), '102004', (SELECT id FROM ref_middle_school WHERE name = '上海市体育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市体育学院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'YP'), (SELECT id FROM ref_school WHERE code = '103002' AND is_active = true LIMIT 1), '103002', (SELECT id FROM ref_middle_school WHERE name = '上海市体育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'YP') LIMIT 1), '上海市体育学院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'YP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '103002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区古华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区古华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区古华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区古华中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区古华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区古华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区实验中学', 16, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤中学附属南桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤中学附属南桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤中学附属南桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤中学附属南桥中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤中学附属南桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤中学附属南桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤中学附属南桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤中学附属南桥中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区汇贤中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区汇贤中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区汇贤中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区汇贤中学', 13, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区汇贤中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区汇贤中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区塘外中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区塘外中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区塘外中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区塘外中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区塘外中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区塘外中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区青村中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区青村中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区奉城第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区奉城第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区奉城第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区奉城第二中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区奉城第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区奉城第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区头桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区头桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区头桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区头桥中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区头桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区头桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区洪庙中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区洪庙中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区洪庙中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区洪庙中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区洪庙中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区洪庙中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区四团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区四团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区四团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区四团中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区四团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区四团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区青溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区青溪中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区青溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区青溪中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区青溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区青溪中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区尚同中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区尚同中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区尚同中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区尚同中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区尚同中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区尚同中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学附属奉贤实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海外国语大学附属奉贤实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学附属奉贤实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海外国语大学附属奉贤实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海外国语大学附属奉贤实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海外国语大学附属奉贤实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区崇实中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区崇实中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区崇实中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区崇实中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区崇实中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区崇实中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区崇实中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区崇实中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区待问中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区待问中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区待问中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区待问中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区待问中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区待问中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤中学附属初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤中学附属初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤中学附属初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤中学附属初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区肖塘中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区肖塘中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区肖塘中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区肖塘中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区肖塘中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区肖塘中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区育秀中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区育秀中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区育秀中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区育秀中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区育秀中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区育秀中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区育秀中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区育秀中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区育秀中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区育秀中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤中学附属三官堂学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤中学附属三官堂学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤中学附属三官堂学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤中学附属三官堂学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤中学附属三官堂学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤中学附属三官堂学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区奉浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区奉浦中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202001' AND is_active = true LIMIT 1), '202001', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区奉浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区奉浦中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区奉浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区奉浦中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'FX'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市奉贤区奉浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'FX') LIMIT 1), '上海市奉贤区奉浦中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'FX') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市淞谊中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市淞谊中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市淞谊中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市淞谊中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市淞谊中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市淞谊中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市淞谊中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市淞谊中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市淞谊中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市淞谊中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区教育学院附属中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区教育学院附属中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区教育学院附属中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区教育学院附属中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区教育学院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区教育学院附属中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市吴淞初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市吴淞初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市吴淞初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市吴淞初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市吴淞初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市吴淞初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市吴淞初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市吴淞初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市吴淞初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市吴淞初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市海滨第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市海滨第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市海滨第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市海滨第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市海滨第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市海滨第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市海滨第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市海滨第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市海滨第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市海滨第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市海滨第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市海滨第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海民办宝莲中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海民办宝莲中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海民办宝莲中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海民办宝莲中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海民办宝莲中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海民办宝莲中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海民办宝莲中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海民办宝莲中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海民办宝莲中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海民办宝莲中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市吴淞第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市吴淞第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市吴淞第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市吴淞第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市吴淞第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市吴淞第二中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市吴淞第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市吴淞第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市吴淞第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市吴淞第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市虎林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市虎林中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市虎林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市虎林中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市虎林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市虎林中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市虎林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市虎林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市虎林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市虎林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市泗塘中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市泗塘中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市泗塘中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市泗塘中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市泗塘中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市泗塘中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市泗塘中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市泗塘中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市泗塘中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市泗塘中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学北校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学北校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学南校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学南校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学南校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市长江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市长江第二中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市长江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市长江第二中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市长江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市长江第二中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市长江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市长江第二中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市长江第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市长江第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区求真中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区求真中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市大场中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市大场中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市大场中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市大场中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市大场中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市大场中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市大场中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市大场中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市大场中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市大场中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市大华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市大华中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市大华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市大华中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市大华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市大华中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市大华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市大华中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市大华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市大华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市月浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市月浦中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市月浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市月浦中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市月浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市月浦中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市月浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市月浦中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市月浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市月浦中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市月浦中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市月浦中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市罗泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗泾中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市罗泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗泾中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市罗泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗泾中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市罗泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗泾中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市罗泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市罗南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗南中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市罗南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗南中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市罗南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗南中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市罗南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗南中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市罗南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市罗南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市罗南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办交华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市民办交华中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办交华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市民办交华中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办交华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市民办交华中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市民办交华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市民办交华中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市民办交华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市民办交华中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区罗店第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区罗店第二中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区罗店第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区罗店第二中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区罗店第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区罗店第二中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区罗店第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区罗店第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区罗店第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区罗店第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区乐之中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区乐之中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区乐之中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区乐之中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区乐之中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区乐之中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区乐之中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区乐之中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区乐之中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区乐之中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区美兰湖中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区美兰湖中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区美兰湖中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区美兰湖中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区美兰湖中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区美兰湖中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区美兰湖中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区美兰湖中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区美兰湖中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区美兰湖中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区杨泰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区杨泰实验中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区杨泰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区杨泰实验中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区杨泰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区杨泰实验中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区杨泰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区杨泰实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区杨泰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区杨泰实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区杨泰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区杨泰实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山经纬实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山经纬实验中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山经纬实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山经纬实验中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山经纬实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山经纬实验中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山经纬实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山经纬实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山经纬实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山经纬实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山经纬实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山经纬实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山罗店中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山罗店中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山罗店中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山罗店中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山罗店中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山罗店中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山罗店中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山罗店中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山罗店中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山罗店中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属宝山罗店中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海师范大学附属宝山罗店中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市顾村中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市顾村中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市顾村中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市顾村中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市顾村中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市顾村中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市顾村中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市顾村中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市顾村中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市顾村中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市行知实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市行知实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市行知实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市行知实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市行知实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市行知实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市高境第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市高境第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市高境第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市高境第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市高境第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市高境第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市高境第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市高境第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市高境第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市高境第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市盛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市盛桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市盛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市盛桥中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市盛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市盛桥中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市盛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市盛桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市盛桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市盛桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区上海大学附属中学实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区上海大学附属中学实验学校', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区上海大学附属中学实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区上海大学附属中学实验学校', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132002' AND is_active = true LIMIT 1), '132002', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区上海大学附属中学实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区上海大学附属中学实验学校', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区上海大学附属中学实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区上海大学附属中学实验学校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市宝山区上海大学附属中学实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市宝山区上海大学附属中学实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132001' AND is_active = true LIMIT 1), '132001', (SELECT id FROM ref_middle_school WHERE name = '上海市行知中学附属宝山实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知中学附属宝山实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133001' AND is_active = true LIMIT 1), '133001', (SELECT id FROM ref_middle_school WHERE name = '上海市行知中学附属宝山实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知中学附属宝山实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '133003' AND is_active = true LIMIT 1), '133003', (SELECT id FROM ref_middle_school WHERE name = '上海市行知中学附属宝山实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知中学附属宝山实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '133003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '132003' AND is_active = true LIMIT 1), '132003', (SELECT id FROM ref_middle_school WHERE name = '上海市行知中学附属宝山实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知中学附属宝山实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '132003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'BS'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市行知中学附属宝山实验学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'BS') LIMIT 1), '上海市行知中学附属宝山实验学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'BS') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市第三女子初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市第三女子初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市第三女子初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市第三女子初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市第三女子初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市第三女子初级中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市天山第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市天山第二中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市天山第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市天山第二中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市天山第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市天山第二中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市姚连生中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市姚连生中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市姚连生中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市姚连生中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市姚连生中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市姚连生中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市天山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市天山初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市天山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市天山初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市天山初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市天山初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市虹桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市虹桥中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市虹桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市虹桥中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市虹桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市虹桥中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市延安实验初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市延安实验初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市延安实验初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市延安实验初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市延安实验初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市延安实验初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市延安实验初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市延安实验初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市复旦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市复旦初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市复旦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市复旦初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市复旦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市复旦初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市复旦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市复旦初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市复旦初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市复旦初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市泸定中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市泸定中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市泸定中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市泸定中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市泸定中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市泸定中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市泸定中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市泸定中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市娄山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市娄山中学', 18, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市娄山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市娄山中学', 13, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市娄山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市娄山中学', 13, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市娄山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市娄山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市西延安中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市西延安中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市西延安中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市西延安中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市西延安中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市西延安中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市新泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市新泾中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市新泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市新泾中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市新泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市新泾中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新世纪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市民办新世纪中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新世纪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市民办新世纪中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新世纪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市民办新世纪中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市民办新世纪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市民办新世纪中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市延安初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市延安初级中学', 28, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市延安初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市延安初级中学', 21, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市延安初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市延安初级中学', 16, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市延安初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市延安初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '华东政法大学附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '华东政法大学附属中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '华东政法大学附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '华东政法大学附属中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '华东政法大学附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '华东政法大学附属中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '华东政法大学附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '华东政法大学附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052002' AND is_active = true LIMIT 1), '052002', (SELECT id FROM ref_middle_school WHERE name = '上海市仙霞高级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市仙霞高级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '053004' AND is_active = true LIMIT 1), '053004', (SELECT id FROM ref_middle_school WHERE name = '上海市仙霞高级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市仙霞高级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '053004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CN'), (SELECT id FROM ref_school WHERE code = '052001' AND is_active = true LIMIT 1), '052001', (SELECT id FROM ref_middle_school WHERE name = '上海市仙霞高级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CN') LIMIT 1), '上海市仙霞高级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CN') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '052001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区三星中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区三星中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区建设中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区建设中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区建设中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区建设中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区合兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区合兴中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区向化中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区向化中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区向化中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区向化中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区崇东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区崇东中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区崇东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区崇东中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区裕安中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区裕安中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区裕安中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区裕安中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区实验中学', 20, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区实验中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明中学附属东门中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明中学附属东门中学', 33, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明中学附属东门中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明中学附属东门中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区凌云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区凌云中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区凌云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区凌云中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区凌云中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区凌云中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区长兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区长兴中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区长明中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区长明中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区长明中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区长明中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属崇明正大中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海师范大学附属崇明正大中学', 16, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海师范大学附属崇明正大中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海师范大学附属崇明正大中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区大新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区大新中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区大新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区大新中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区大公中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区大公中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区大公中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区大公中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区大公中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区大公中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海民办民一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海民办民一中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海民办民一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海民办民一中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512000' AND is_active = true LIMIT 1), '512000', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区横沙中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区横沙中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512000' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'CM'), (SELECT id FROM ref_school WHERE code = '512001' AND is_active = true LIMIT 1), '512001', (SELECT id FROM ref_middle_school WHERE name = '上海市崇明区横沙中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'CM') LIMIT 1), '上海市崇明区横沙中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'CM') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '512001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '格致初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '格致初级中学', 21, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '格致初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '格致初级中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '格致初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '格致初级中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '格致初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '格致初级中学', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '格致初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '格致初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '格致初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '格致初级中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '格致初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '格致初级中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '格致初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '格致初级中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '格致初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '格致初级中学', 16, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '大同初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大同初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '大同初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大同初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '大同初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大同初级中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '大同初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大同初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '大同初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大同初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '大同初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大同初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '大同初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大同初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '大同初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大同初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '大同初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大同初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '向明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '向明初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '向明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '向明初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '向明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '向明初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '向明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '向明初级中学', 14, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '向明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '向明初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '向明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '向明初级中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '向明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '向明初级中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '向明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '向明初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '向明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '向明初级中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '大境初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大境初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '大境初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大境初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '大境初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大境初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '大境初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大境初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '大境初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大境初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '大境初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大境初级中学', 13, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '大境初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大境初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '大境初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大境初级中学', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '大境初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '大境初级中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '光明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '光明初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '光明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '光明初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '光明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '光明初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '光明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '光明初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '光明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '光明初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '光明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '光明初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '光明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '光明初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '光明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '光明初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '光明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '光明初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '光明初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '光明初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '敬业初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '敬业初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '敬业初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '敬业初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '敬业初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '敬业初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '敬业初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '敬业初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '敬业初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '敬业初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '敬业初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '敬业初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '敬业初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '敬业初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '敬业初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '敬业初级中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '敬业初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '敬业初级中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '敬业初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '敬业初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '011007卢湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011007卢湾中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '011007卢湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011007卢湾中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '011007卢湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011007卢湾中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '011007卢湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011007卢湾中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '011007卢湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011007卢湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '011007卢湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011007卢湾中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '011007卢湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011007卢湾中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '011007卢湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011007卢湾中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '011007卢湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011007卢湾中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '011007卢湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011007卢湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '市八初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市八初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '市八初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市八初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '市八初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市八初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '市八初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市八初级中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '市八初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市八初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '市八初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市八初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '市八初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市八初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '市八初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市八初级中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '市八初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市八初级中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '011009尚文中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011009尚文中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '011009尚文中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011009尚文中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '011009尚文中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011009尚文中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '011009尚文中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011009尚文中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '011009尚文中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011009尚文中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '011009尚文中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011009尚文中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '011009尚文中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011009尚文中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '011009尚文中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011009尚文中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '011009尚文中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011009尚文中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '011009尚文中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '011009尚文中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '清华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '清华中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012002' AND is_active = true LIMIT 1), '012002', (SELECT id FROM ref_middle_school WHERE name = '清华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '清华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '清华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '清华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '清华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '清华中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012006' AND is_active = true LIMIT 1), '012006', (SELECT id FROM ref_middle_school WHERE name = '清华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '清华中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '清华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '清华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '清华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '清华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '清华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '清华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '清华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '清华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '民办明珠中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办明珠中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '民办明珠中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办明珠中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '民办明珠中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办明珠中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '民办明珠中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办明珠中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '民办明珠中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办明珠中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '民办明珠中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办明珠中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '民办明珠中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办明珠中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '民办明珠中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办明珠中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '民办明珠中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办明珠中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '民办立达中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办立达中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '民办立达中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办立达中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '民办立达中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办立达中学', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '民办立达中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办立达中学', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '民办立达中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办立达中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '民办立达中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办立达中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '民办立达中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办立达中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '民办立达中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办立达中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '民办立达中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '民办立达中学', 11, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '013003市十中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '013003市十中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '013003市十中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '013003市十中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '013003市十中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '013003市十中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '013003市十中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '013003市十中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '013003市十中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '013003市十中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '013003市十中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '013003市十中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '013003市十中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '013003市十中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '013003市十中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '013003市十中学', 12, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '013003市十中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '013003市十中学', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '储能中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '储能中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '储能中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '储能中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '储能中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '储能中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '储能中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '储能中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '储能中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '储能中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '储能中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '储能中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '储能中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '储能中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '储能中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '储能中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '储能中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '储能中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '储能中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '储能中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '金陵中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '金陵中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '金陵中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '金陵中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '金陵中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '金陵中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '金陵中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '金陵中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '金陵中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '金陵中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '金陵中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '金陵中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '金陵中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '金陵中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '金陵中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '金陵中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '金陵中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '金陵中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '市南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市南中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '市南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市南中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '市南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市南中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '市南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市南中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '市南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '市南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市南中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '市南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市南中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '市南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市南中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '市南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市南中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '市南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '市南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012001' AND is_active = true LIMIT 1), '012001', (SELECT id FROM ref_middle_school WHERE name = '上音比乐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '上音比乐中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012003' AND is_active = true LIMIT 1), '012003', (SELECT id FROM ref_middle_school WHERE name = '上音比乐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '上音比乐中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012005' AND is_active = true LIMIT 1), '012005', (SELECT id FROM ref_middle_school WHERE name = '上音比乐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '上音比乐中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012007' AND is_active = true LIMIT 1), '012007', (SELECT id FROM ref_middle_school WHERE name = '上音比乐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '上音比乐中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012007' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012008' AND is_active = true LIMIT 1), '012008', (SELECT id FROM ref_middle_school WHERE name = '上音比乐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '上音比乐中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012008' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012009' AND is_active = true LIMIT 1), '012009', (SELECT id FROM ref_middle_school WHERE name = '上音比乐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '上音比乐中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012009' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '012010' AND is_active = true LIMIT 1), '012010', (SELECT id FROM ref_middle_school WHERE name = '上音比乐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '上音比乐中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '012010' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上音比乐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '上音比乐中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'HP'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上音比乐中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'HP') LIMIT 1), '上音比乐中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'HP') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '可上海市建平中学西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市建平中学西校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '可上海市建平中学西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市建平中学西校', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '可上海市建平中学西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市建平中学西校', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '可上海市建平中学西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市建平中学西校', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '可上海市建平中学西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市建平中学西校', 15, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '可上海市建平中学西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市建平中学西校', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海市建平中学西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市建平中学西校', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市进才中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市进才中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市进才中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市进才中学北校', 8, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市进才中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市进才中学北校', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市进才中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市进才中学北校', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市进才中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市进才中学北校', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市进才中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市进才中学北校', 10, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市进才中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市进才中学北校', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市进才中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市进才中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市进才中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市进才中学北校', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '许华东师范大学附属东昌中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许华东师范大学附属东昌中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '许华东师范大学附属东昌中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许华东师范大学附属东昌中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '许华东师范大学附属东昌中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许华东师范大学附属东昌中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '许华东师范大学附属东昌中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许华东师范大学附属东昌中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '许华东师范大学附属东昌中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许华东师范大学附属东昌中学南校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '许华东师范大学附属东昌中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许华东师范大学附属东昌中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '许华东师范大学附属东昌中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许华东师范大学附属东昌中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '许华东师范大学附属东昌中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许华东师范大学附属东昌中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市洋泾中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洋泾中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市洋泾中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洋泾中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市洋泾中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洋泾中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市洋泾中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洋泾中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市洋泾中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洋泾中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市洋泾中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洋泾中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '经上海市上南中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市上南中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '经上海市上南中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市上南中学东校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '经上海市上南中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市上南中学东校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '经上海市上南中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市上南中学东校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '经上海市上南中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市上南中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '经上海市上南中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市上南中学东校', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '经上海市上南中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市上南中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '经上海市上南中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市上南中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '经上海市上南中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市上南中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学北校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学北校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学北校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学北校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学北校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学北校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学北校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学北校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学北校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市洪山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洪山中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市洪山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洪山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市洪山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洪山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市洪山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洪山中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市洪山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洪山中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市洪山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洪山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市洪山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市洪山中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市上南中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市上南中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市清流中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市清流中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市清流中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市清流中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市清流中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市清流中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市清流中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市清流中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市清流中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市清流中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市清流中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市清流中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市清流中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市清流中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市清流中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市清流中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '未上海市浦泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '未上海市浦泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '未上海市浦泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '未上海市浦泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '未上海市浦泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '未上海市浦泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '未上海市浦泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '未上海市浦泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '未上海市浦泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '未上海市浦泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '未上海市浦泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '未上海市浦泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '未上海市浦泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '未上海市浦泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '未上海市浦泾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '未上海市浦泾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海交通大学附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海交通大学附属浦东实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海交通大学附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海交通大学附属浦东实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海交通大学附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海交通大学附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海交通大学附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海交通大学附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海交通大学附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区教育学院附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区教育学院附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区教育学院附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区教育学院附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区教育学院附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区教育学院附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区教育学院附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区教育学院附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区教育学院附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区教育学院附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区教育学院附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区教育学院附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区教育学院附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区教育学院附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区教育学院附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区教育学院附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区教育学院附属实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区教育学院附属实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '可上海市洋泾中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市洋泾中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '可上海市洋泾中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市洋泾中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '可上海市洋泾中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市洋泾中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '可上海市洋泾中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市洋泾中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '可上海市洋泾中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市洋泾中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '可上海市洋泾中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市洋泾中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '可上海市洋泾中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市洋泾中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海市洋泾中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市洋泾中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '许上海市罗山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市罗山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '许上海市罗山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市罗山中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '许上海市罗山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市罗山中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '许上海市罗山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市罗山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '许上海市罗山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市罗山中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '许上海市罗山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市罗山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '许上海市罗山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市罗山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '许上海市罗山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市罗山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '经上海市金杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市金杨中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '经上海市金杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市金杨中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '经上海市金杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市金杨中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '经上海市金杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市金杨中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '经上海市金杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市金杨中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '经上海市金杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市金杨中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '经上海市金杨中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市金杨中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市金川中学（现上海市建平实验中学金川校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市金川中学（现上海市建平实验中学金川校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市金川中学（现上海市建平实验中学金川校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市金川中学（现上海市建平实验中学金川校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市金川中学（现上海市建平实验中学金川校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市金川中学（现上海市建平实验中学金川校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市金川中学（现上海市建平实验中学金川校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市金川中学（现上海市建平实验中学金川校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市金川中学（现上海市建平实验中学金川校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市金川中学（现上海市建平实验中学金川校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市金川中学（现上海市建平实验中学金川校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市金川中学（现上海市建平实验中学金川校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市金川中学（现上海市建平实验中学金川校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市金川中学（现上海市建平实验中学金川校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市金川中学（现上海市建平实验中学金川校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市金川中学（现上海市建平实验中学金川校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市金川中学（现上海市建平实验中学金川校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市金川中学（现上海市建平实验中学金川校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市华林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市华林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市华林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市华林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市华林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市华林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市华林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市华林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市华林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市华林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市华林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市华林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市华林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市华林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市华林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市华林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市孙桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市孙桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市孙桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市孙桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市孙桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市孙桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市孙桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市孙桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市孙桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市孙桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市孙桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市孙桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市孙桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市孙桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市孙桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市孙桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市育人中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育人中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市育人中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育人中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市育人中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育人中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市育人中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育人中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市育人中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育人中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市育人中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育人中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市育人中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育人中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市育人中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育人中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市育人中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育人中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市东林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市东林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市东林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市东林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市东林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市东林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市东林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市东林中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东林中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市施湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市施湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市施湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市施湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市施湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市施湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市施湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市施湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市施湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市施湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市施湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市施湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市施湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市施湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市施湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市施湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市施湾中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市施湾中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市黄楼中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市黄楼中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市黄楼中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市黄楼中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市黄楼中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市黄楼中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市黄楼中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市黄楼中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市黄楼中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市黄楼中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市黄楼中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市黄楼中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市黄楼中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市黄楼中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市黄楼中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市黄楼中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市王港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市王港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市王港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市王港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市王港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市王港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市王港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市王港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市王港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市王港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市王港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市王港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市王港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市王港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市王港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市王港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '可上海市杨园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市杨园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '可上海市杨园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市杨园中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '可上海市杨园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市杨园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '可上海市杨园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市杨园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '可上海市杨园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市杨园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '可上海市杨园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市杨园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海市杨园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市杨园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市东沟中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东沟中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市东沟中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东沟中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市东沟中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东沟中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市东沟中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东沟中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市东沟中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东沟中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市东沟中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东沟中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市东沟中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东沟中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市东沟中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东沟中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市东沟中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市东沟中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属高桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属高桥实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属高桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属高桥实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属高桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属高桥实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属高桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属高桥实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属高桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属高桥实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属高桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属高桥实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属高桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属高桥实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属高桥实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属高桥实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '经上海市凌桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市凌桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '经上海市凌桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市凌桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '经上海市凌桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市凌桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '经上海市凌桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市凌桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '经上海市凌桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市凌桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '经上海市凌桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市凌桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '经上海市凌桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市凌桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '经上海市凌桥中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市凌桥中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市顾路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市顾路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市顾路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市顾路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市顾路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市顾路中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市顾路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市顾路中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市顾路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市顾路中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市顾路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市顾路中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市顾路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市顾路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市顾路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市顾路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市顾路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市顾路中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学华夏西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学华夏西校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学华夏西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学华夏西校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学华夏西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学华夏西校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学华夏西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学华夏西校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学华夏西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学华夏西校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学华夏西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学华夏西校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学华夏西校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学华夏西校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学北校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市致远中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市致远中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市致远中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市致远中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市致远中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市致远中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市致远中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市致远中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市致远中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市致远中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市致远中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市致远中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市致远中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市致远中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市致远中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市致远中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才实验中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才实验中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才实验中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才实验中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才实验中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才实验中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才实验中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才实验中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才实验中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才实验中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才实验中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才实验中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才实验中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才实验中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才实验中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才实验中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才实验中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才实验中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市蔡路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市蔡路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市蔡路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市蔡路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市蔡路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市蔡路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市蔡路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市蔡路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市蔡路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市蔡路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市蔡路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市蔡路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市蔡路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市蔡路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市蔡路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市蔡路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市六团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市六团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市六团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市六团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市六团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市六团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市六团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市六团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '可上海戏剧学院附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海戏剧学院附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '可上海戏剧学院附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海戏剧学院附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '可上海戏剧学院附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海戏剧学院附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '可上海戏剧学院附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海戏剧学院附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '可上海戏剧学院附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海戏剧学院附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '可上海戏剧学院附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海戏剧学院附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海戏剧学院附属浦东实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海戏剧学院附属浦东实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市浦兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦兴中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦兴中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦兴中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦兴中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦兴中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦兴中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦兴中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦兴中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦兴中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦兴中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '经上海浦东新区民办欣竹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海浦东新区民办欣竹中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '经上海浦东新区民办欣竹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海浦东新区民办欣竹中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '经上海浦东新区民办欣竹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海浦东新区民办欣竹中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '经上海浦东新区民办欣竹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海浦东新区民办欣竹中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '经上海浦东新区民办欣竹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海浦东新区民办欣竹中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '经上海浦东新区民办欣竹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海浦东新区民办欣竹中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '经上海浦东新区民办欣竹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海浦东新区民办欣竹中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '经上海浦东新区民办欣竹中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海浦东新区民办欣竹中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '上海市新云台中学（现上海市建平实验地杰中学博华路校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新云台中学（现上海市建平实验地杰中学博华路校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市新云台中学（现上海市建平实验地杰中学博华路校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新云台中学（现上海市建平实验地杰中学博华路校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市新云台中学（现上海市建平实验地杰中学博华路校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新云台中学（现上海市建平实验地杰中学博华路校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市新云台中学（现上海市建平实验地杰中学博华路校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新云台中学（现上海市建平实验地杰中学博华路校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市新云台中学（现上海市建平实验地杰中学博华路校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新云台中学（现上海市建平实验地杰中学博华路校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市新云台中学（现上海市建平实验地杰中学博华路校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新云台中学（现上海市建平实验地杰中学博华路校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市新云台中学（现上海市建平实验地杰中学博华路校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新云台中学（现上海市建平实验地杰中学博华路校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市新云台中学（现上海市建平实验地杰中学博华路校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新云台中学（现上海市建平实验地杰中学博华路校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市新云台中学（现上海市建平实验地杰中学博华路校区）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新云台中学（现上海市建平实验地杰中学博华路校区）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市陆行中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市陆行中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市杨思中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市杨思中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市杨思中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市杨思中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市杨思中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市杨思中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市杨思中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市杨思中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市杨思中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市杨思中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市杨思中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市杨思中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市杨思中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市杨思中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市杨思中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市杨思中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海民办浦东交中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海民办浦东交中初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海民办浦东交中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海民办浦东交中初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海民办浦东交中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海民办浦东交中初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海民办浦东交中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海民办浦东交中初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海民办浦东交中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海民办浦东交中初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海民办浦东交中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海民办浦东交中初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海民办浦东交中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海民办浦东交中初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海民办浦东交中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海民办浦东交中初级中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海民办浦东交中初级中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海民办浦东交中初级中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市建平香梅中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平香梅中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市建平香梅中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平香梅中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市建平香梅中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平香梅中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市建平香梅中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平香梅中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市建平香梅中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平香梅中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市建平香梅中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平香梅中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市建平香梅中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平香梅中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第二中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第二中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第二中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第二中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第二中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第二中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第二中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第二中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第二中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第三中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第三中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市新港中学（现上海市浦东新区进才书院学校）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新港中学（现上海市浦东新区进才书院学校）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市新港中学（现上海市浦东新区进才书院学校）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新港中学（现上海市浦东新区进才书院学校）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市新港中学（现上海市浦东新区进才书院学校）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新港中学（现上海市浦东新区进才书院学校）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市新港中学（现上海市浦东新区进才书院学校）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新港中学（现上海市浦东新区进才书院学校）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市新港中学（现上海市浦东新区进才书院学校）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新港中学（现上海市浦东新区进才书院学校）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市新港中学（现上海市浦东新区进才书院学校）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新港中学（现上海市浦东新区进才书院学校）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市新港中学（现上海市浦东新区进才书院学校）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新港中学（现上海市浦东新区进才书院学校）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市新港中学（现上海市浦东新区进才书院学校）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新港中学（现上海市浦东新区进才书院学校）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市新港中学（现上海市浦东新区进才书院学校）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新港中学（现上海市浦东新区进才书院学校）', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市新港中学（现上海市浦东新区进才书院学校）' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市新港中学（现上海市浦东新区进才书院学校）', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '可上海市书院中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市书院中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '可上海市书院中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市书院中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '可上海市书院中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市书院中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '可上海市书院中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市书院中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '可上海市书院中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市书院中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '可上海市书院中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市书院中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '可上海市书院中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市书院中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海市书院中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市书院中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '可上海市书院中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市书院中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市大团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市大团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市大团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市大团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市大团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市大团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市大团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市大团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市大团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市大团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市大团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市大团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市大团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市大团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市大团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市大团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市大团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市大团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市大团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市大团中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '许上海市坦直中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市坦直中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '许上海市坦直中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市坦直中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '许上海市坦直中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市坦直中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '许上海市坦直中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市坦直中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '许上海市坦直中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市坦直中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '许上海市坦直中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市坦直中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '许上海市坦直中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市坦直中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '许上海市坦直中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市坦直中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '经上海市傅雷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市傅雷中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '经上海市傅雷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市傅雷中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '经上海市傅雷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市傅雷中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '经上海市傅雷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市傅雷中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '经上海市傅雷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市傅雷中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '经上海市傅雷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市傅雷中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '经上海市傅雷中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市傅雷中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市澧溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市澧溪中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市澧溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市澧溪中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市澧溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市澧溪中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市澧溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市澧溪中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市澧溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市澧溪中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市澧溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市澧溪中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市澧溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市澧溪中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市澧溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市澧溪中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市澧溪中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市澧溪中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市六灶中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六灶中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市六灶中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六灶中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市六灶中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六灶中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市六灶中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六灶中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市六灶中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六灶中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市六灶中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六灶中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市六灶中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市六灶中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东教育发展研究院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东教育发展研究院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东教育发展研究院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东教育发展研究院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东教育发展研究院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东教育发展研究院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东教育发展研究院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东教育发展研究院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东教育发展研究院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东教育发展研究院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东教育发展研究院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东教育发展研究院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东教育发展研究院附属中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东教育发展研究院附属中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第四中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第四中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第四中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第四中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第四中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第四中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第四中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海中学东校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海中学东校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海中学东校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海中学东校', 9, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学东校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市北蔡中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市北蔡中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市北蔡中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市北蔡中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市北蔡中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市北蔡中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市北蔡中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市北蔡中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市北蔡中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市北蔡中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市北蔡中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市北蔡中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海市临港第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市临港第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市临港第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市临港第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市临港第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市临港第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市临港第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市临港第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市临港第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市临港第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市临港第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市临港第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市临港第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市临港第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市临港第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市临港第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市临港第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市临港第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市临港第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市临港第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '可上海民办光华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海民办光华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '可上海民办光华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海民办光华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '可上海民办光华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海民办光华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '可上海民办光华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海民办光华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '可上海民办光华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海民办光华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '可上海民办光华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海民办光华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海民办光华中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海民办光华中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第五中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第五中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第五中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第五中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第五中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第五中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第五中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第五中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第五中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第五中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '许上海市浦东新区进才中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市浦东新区进才中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '许上海市浦东新区进才中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市浦东新区进才中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '许上海市浦东新区进才中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市浦东新区进才中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '许上海市浦东新区进才中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市浦东新区进才中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '许上海市浦东新区进才中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市浦东新区进才中学南校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '许上海市浦东新区进才中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市浦东新区进才中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '许上海市浦东新区进才中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市浦东新区进才中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '经上海市临港实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市临港实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '经上海市临港实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市临港实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '经上海市临港实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市临港实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '经上海市临港实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市临港实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '经上海市临港实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市临港实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '经上海市临港实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市临港实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '经上海市临港实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市临港实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '经上海市临港实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市临港实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '经上海市临港实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市临港实验中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才中学东校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区进才中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区进才中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东模范实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东模范实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区三灶实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区三灶实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区三灶实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区三灶实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区三灶实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区三灶实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区三灶实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区三灶实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区三灶实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区三灶实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区三灶实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区三灶实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区三灶实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区三灶实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区三灶实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区三灶实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区新场实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区新场实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区新场实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区新场实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区新场实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区新场实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区新场实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区新场实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区新场实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区新场实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区新场实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区新场实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区新场实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区新场实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区新场实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区新场实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区新场实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区新场实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区懿德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区懿德中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区懿德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区懿德中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区懿德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区懿德中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区懿德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区懿德中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区懿德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区懿德中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区懿德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区懿德中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区懿德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区懿德中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区懿德中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区懿德中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平培德实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平培德实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平培德实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平培德实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平培德实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平培德实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平培德实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平培德实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平培德实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平培德实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平培德实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平培德实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平培德实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平培德实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平培德实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平培德实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平培德实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平培德实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海市浦东新区进才森兰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市浦东新区进才森兰实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '可上海市浦东新区进才森兰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市浦东新区进才森兰实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '可上海市浦东新区进才森兰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市浦东新区进才森兰实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '可上海市浦东新区进才森兰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市浦东新区进才森兰实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '可上海市浦东新区进才森兰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市浦东新区进才森兰实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '可上海市浦东新区进才森兰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市浦东新区进才森兰实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '可上海市浦东新区进才森兰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市浦东新区进才森兰实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海市浦东新区进才森兰实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市浦东新区进才森兰实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平临港中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属浦东临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属浦东临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属浦东临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属浦东临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属浦东临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属浦东临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属浦东临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属浦东临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属浦东临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属浦东临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属浦东临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属浦东临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属浦东临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属浦东临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属浦东临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属浦东临港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '许上海师范大学附属浦东临港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海师范大学附属浦东临港中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '042032' AND is_active = true LIMIT 1), '042032', (SELECT id FROM ref_middle_school WHERE name = '经上海市建平实验地杰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市建平实验地杰中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '042032' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '经上海市建平实验地杰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市建平实验地杰中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '经上海市建平实验地杰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市建平实验地杰中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '经上海市建平实验地杰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市建平实验地杰中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '经上海市建平实验地杰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市建平实验地杰中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '经上海市建平实验地杰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市建平实验地杰中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '经上海市建平实验地杰中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市建平实验地杰中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验张江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验张江中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验张江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验张江中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验张江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验张江中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验张江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验张江中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验张江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验张江中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验张江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验张江中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验张江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验张江中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验张江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验张江中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验张江中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验张江中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平康梧中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平康梧中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平康梧中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平康梧中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平康梧中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平康梧中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平康梧中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平康梧中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平康梧中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平康梧中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平康梧中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平康梧中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平康梧中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平康梧中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区建平康梧中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区建平康梧中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市历城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市历城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市历城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市历城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市历城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市历城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市历城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市历城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市历城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市历城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市历城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市历城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市历城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市历城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市竹园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市竹园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市竹园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市竹园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市竹园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市竹园中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市竹园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市竹园中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市竹园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市竹园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市竹园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市竹园中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市竹园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市竹园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市竹园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市竹园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市竹园中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市竹园中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市泾南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泾南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市泾南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泾南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市泾南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泾南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市泾南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泾南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市泾南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泾南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市泾南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泾南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市泾南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泾南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市泾南中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泾南中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市香山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市香山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市香山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市香山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市香山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市香山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市香山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市香山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市香山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市香山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市香山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市香山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市香山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市香山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市香山中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市香山中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市沪新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市沪新中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市沪新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市沪新中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市沪新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市沪新中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市沪新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市沪新中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市沪新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市沪新中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市沪新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市沪新中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市沪新中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市沪新中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市育民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育民中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市育民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育民中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市育民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育民中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市育民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育民中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市育民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育民中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市育民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育民中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市育民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育民中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市育民中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市育民中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '可上海立信会计金融学院附属高行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海立信会计金融学院附属高行中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '可上海立信会计金融学院附属高行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海立信会计金融学院附属高行中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '可上海立信会计金融学院附属高行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海立信会计金融学院附属高行中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '可上海立信会计金融学院附属高行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海立信会计金融学院附属高行中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '可上海立信会计金融学院附属高行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海立信会计金融学院附属高行中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '可上海立信会计金融学院附属高行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海立信会计金融学院附属高行中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '可上海立信会计金融学院附属高行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海立信会计金融学院附属高行中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海立信会计金融学院附属高行中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海立信会计金融学院附属高行中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海第二工业大学附属龚路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海第二工业大学附属龚路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海第二工业大学附属龚路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海第二工业大学附属龚路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海第二工业大学附属龚路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海第二工业大学附属龚路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海第二工业大学附属龚路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海第二工业大学附属龚路中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海第二工业大学附属龚路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海第二工业大学附属龚路中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海第二工业大学附属龚路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海第二工业大学附属龚路中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海第二工业大学附属龚路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海第二工业大学附属龚路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海第二工业大学附属龚路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海第二工业大学附属龚路中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海第二工业大学附属龚路中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海第二工业大学附属龚路中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '许上海市五三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市五三中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '许上海市五三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市五三中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '许上海市五三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市五三中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '许上海市五三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市五三中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '许上海市五三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市五三中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '许上海市五三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市五三中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '许上海市五三中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市五三中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '经上海市侨光中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市侨光中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '经上海市侨光中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市侨光中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '经上海市侨光中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市侨光中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '经上海市侨光中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市侨光中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '经上海市侨光中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市侨光中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '经上海市侨光中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市侨光中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '经上海市侨光中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市侨光中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '经上海市侨光中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '经上海市侨光中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市江镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市江镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市江镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市江镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市江镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市江镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市江镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市江镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市江镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市江镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市江镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市江镇中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市江镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市江镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市江镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市江镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市江镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市江镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市合庆中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市合庆中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市合庆中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市合庆中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市合庆中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市合庆中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市合庆中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市合庆中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市合庆中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市合庆中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市合庆中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市合庆中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市合庆中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市合庆中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市合庆中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市合庆中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学张江实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学张江实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学张江实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学张江实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学张江实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学张江实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学张江实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学张江实验中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学张江实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学张江实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学张江实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学张江实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学张江实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学张江实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学张江实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学张江实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学东校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市三林中学东校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市三林中学东校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学北校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学北校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102056' AND is_active = true LIMIT 1), '102056', (SELECT id FROM ref_middle_school WHERE name = '上海市高东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市高东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102056' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市高东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市高东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市高东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市高东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市高东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市高东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市高东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市高东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市高东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市高东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市高东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市高东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市高东中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市高东中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第一中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第一中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第一中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第一中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第一中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市南汇第一中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市南汇第一中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '可上海市老港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市老港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '可上海市老港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市老港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '可上海市老港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市老港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '可上海市老港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市老港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '可上海市老港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市老港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '可上海市老港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市老港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '可上海市老港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市老港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海市老港中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市老港中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市泥城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泥城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市泥城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泥城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市泥城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泥城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市泥城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泥城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市泥城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泥城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市泥城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泥城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市泥城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泥城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市泥城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泥城中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市泥城中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市泥城中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '许上海市长岛中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市长岛中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '许上海市长岛中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市长岛中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '许上海市长岛中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市长岛中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '许上海市长岛中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市长岛中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '许上海市长岛中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市长岛中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '许上海市长岛中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市长岛中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '许上海市长岛中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市长岛中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '许上海市长岛中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市长岛中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学南校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学南校', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学南校', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学南校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学南校', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学南校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学南校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市川沙中学南校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市川沙中学南校', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验中学', 6, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市建平实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市建平实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152006' AND is_active = true LIMIT 1), '152006', (SELECT id FROM ref_middle_school WHERE name = '可上海市进才实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市进才实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152006' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '可上海市进才实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市进才实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '可上海市进才实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市进才实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '可上海市进才实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市进才实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '可上海市进才实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市进才实验中学', 5, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '可上海市进才实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市进才实验中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '可上海市进才实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市进才实验中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '可上海市进才实验中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '可上海市进才实验中学', 4, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '许上海市张江集团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市张江集团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '许上海市张江集团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市张江集团中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '许上海市张江集团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市张江集团中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '许上海市张江集团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市张江集团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '许上海市张江集团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市张江集团中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '许上海市张江集团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市张江集团中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '许上海市张江集团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市张江集团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '许上海市张江集团中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '许上海市张江集团中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152003' AND is_active = true LIMIT 1), '152003', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区彭镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区彭镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152003' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区彭镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区彭镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区彭镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区彭镇中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区彭镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区彭镇中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区彭镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区彭镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区彭镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区彭镇中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区彭镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区彭镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区彭镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区彭镇中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区彭镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区彭镇中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '202002' AND is_active = true LIMIT 1), '202002', (SELECT id FROM ref_middle_school WHERE name = '上海市浦东新区彭镇中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海市浦东新区彭镇中学', 7, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '202002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '102057' AND is_active = true LIMIT 1), '102057', (SELECT id FROM ref_middle_school WHERE name = '上海浦东新区民办进德外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海浦东新区民办进德外国语中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '102057' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '上海浦东新区民办进德外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海浦东新区民办进德外国语中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '上海浦东新区民办进德外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海浦东新区民办进德外国语中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '上海浦东新区民办进德外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海浦东新区民办进德外国语中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '上海浦东新区民办进德外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海浦东新区民办进德外国语中学', 3, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '上海浦东新区民办进德外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海浦东新区民办进德外国语中学', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '上海浦东新区民办进德外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海浦东新区民办进德外国语中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '上海浦东新区民办进德外国语中学' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '上海浦东新区民办进德外国语中学', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152001' AND is_active = true LIMIT 1), '152001', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学前滩学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学第二附属中学前滩学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152002' AND is_active = true LIMIT 1), '152002', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学前滩学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学第二附属中学前滩学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152002' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153001' AND is_active = true LIMIT 1), '153001', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学前滩学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学第二附属中学前滩学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153001' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153005' AND is_active = true LIMIT 1), '153005', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学前滩学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学第二附属中学前滩学校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152004' AND is_active = true LIMIT 1), '152004', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学前滩学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学第二附属中学前滩学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '153004' AND is_active = true LIMIT 1), '153004', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学前滩学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学第二附属中学前滩学校', 2, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '153004' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '152005' AND is_active = true LIMIT 1), '152005', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学前滩学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学第二附属中学前滩学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '152005' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;
INSERT INTO ref_quota_allocation_school (year, district_id, high_school_id, high_school_code, middle_school_id, middle_school_name, quota_count, data_year, created_at, updated_at) SELECT 2025, (SELECT id FROM ref_district WHERE code = 'PD'), (SELECT id FROM ref_school WHERE code = '151078' AND is_active = true LIMIT 1), '151078', (SELECT id FROM ref_middle_school WHERE name = '华东师范大学第二附属中学前滩学校' AND district_id = (SELECT id FROM ref_district WHERE code = 'PD') LIMIT 1), '华东师范大学第二附属中学前滩学校', 1, 2025, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP WHERE EXISTS (SELECT 1 FROM ref_district WHERE code = 'PD') AND EXISTS (SELECT 1 FROM ref_school WHERE code = '151078' AND is_active = true) ON CONFLICT (year, high_school_code, middle_school_name) DO UPDATE SET quota_count = EXCLUDED.quota_count, high_school_id = COALESCE(EXCLUDED.high_school_id, ref_quota_allocation_school.high_school_id), middle_school_id = COALESCE(EXCLUDED.middle_school_id, ref_quota_allocation_school.middle_school_id), updated_at = CURRENT_TIMESTAMP;

-- 更新初中学校估算人数
-- 参考: db/seeds/050_update_estimated_student_count.sql
